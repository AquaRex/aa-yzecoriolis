<form class="flexcol" id="AAItemSettings" autocomplete="off" novalidate>
    <nav class="sheet-tabs tabs" data-group="sections">
        <a class="aa-options" data-tab="overrides"><i class="fas fa-bomb"></i> Animations </a>
    </nav>

    <section class="content">
        <!--Animation Settings-->
        <div class="tab" data-tab="overrides" data-group="sections">
            {{#each settings.aaAutoRecognition.overrides as |override idx|}}
            <div class='aa-autorecog'>
                <div class='flexrow override-entry' data-idx="{{idx}}">
                    <div class='flexcol'>
                        <div class='form-group'>
                            <label for="aaAutoRecognition.overrides.{{idx}}.name">
                                Name
                            </label>
                            <div class='form-fields'>
                                <input type='text' name="aaAutoRecognition.overrides.{{idx}}.name"
                                    value="{{lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'name'}}" />
                            </div>
                        </div>
                        <div class='form-group'>
                            <label for="aaAutoRecognition.overrides.{{idx}}.type">Type</label>
                            <select name="aaAutoRecognition.overrides.{{idx}}.type">
                                {{#select (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'type')}}
                                <option value=""></option>
                                <option value="melee">Melee</option>
                                <option value="range">Range</option>
                                <option value="spell">Spell</option>
                                {{/select}}
                            </select>
                        </div>
                        {{#ifEquals (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'type') "melee"}}
                        <div class='form-group'>
                            <label for="aaAutoRecognition.overrides.{{idx}}.animation">Animation</label>
                            <select name="aaAutoRecognition.overrides.{{idx}}.animation">
                                {{#select (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'animation')}}
                                {{#each ../meleeList as |name key|}}
                                <option value="{{key}}">{{name}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        {{/ifEquals}}
                        {{#ifEquals (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'type') "range"}}
                        <div class='form-group'>
                            <label for="aaAutoRecognition.overrides.{{idx}}.animation">Animation</label>
                            <select name="aaAutoRecognition.overrides.{{idx}}.animation">
                                {{#select (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'animation')}}
                                {{#each ../rangeList as |name key|}}
                                <option value="{{key}}">{{name}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        {{/ifEquals}}
                        {{#ifEquals (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'type') "spell"}}
                        <div class='form-group'>
                            <label for="aaAutoRecognition.overrides.{{idx}}.animation">Animation</label>
                            <select name="aaAutoRecognition.overrides.{{idx}}.animation">
                                {{#select (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'animation')}}
                                {{#each ../spellList as |name key|}}
                                <option value="{{key}}">{{name}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        {{/ifEquals}}
                        <div class='form-group'>
                            <label for="aaAutoRecognition.overrides.{{idx}}.variant">Variant</label>
                            <select name="aaAutoRecognition.overrides.{{idx}}.variant">
                                {{#select (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'variant')}}
                                {{#each (lookup (lookup ../variants (lookup (lookup
                                ../settings.aaAutoRecognition.overrides idx) 'type')) (lookup (lookup
                                ../settings.aaAutoRecognition.overrides idx) 'animation')) as |name key|}}
                                <option value="{{key}}">{{name}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                        <div class='form-group'>
                            <label for="aaAutoRecognition.overrides.{{idx}}.color">Color</label>
                            <select name="aaAutoRecognition.overrides.{{idx}}.color">
                                {{#select (lookup (lookup ../settings.aaAutoRecognition.overrides idx) 'color')}}
                                {{#each (lookup (lookup (lookup ../colors (lookup (lookup
                                ../settings.aaAutoRecognition.overrides idx) 'type')) (lookup (lookup
                                ../settings.aaAutoRecognition.overrides idx) 'animation')) (lookup (lookup
                                ../settings.aaAutoRecognition.overrides idx) 'variant')) as |name key|}}
                                <option value="{{key}}">{{name}}</option>
                                {{/each}}
                                {{/select}}
                            </select>
                        </div>
                    </div>
                    <div class='flexcol remove-override-wrapper'>
                        <button class='remove-autorecog' data-idx="{{idx}}">
                            <i class='far fa-trash-alt'></i>
                        </button>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
        <footer class='sheet-footer flexrow add-override-wrapper'>
            <button class='add-autorecog'>
                <i class='far fa-plus-square'></i>Add Override
            </button>
        </footer>
        </div>

    </section>
    <footer class="sheet-footer flexrow">
        <button type="submit" name="submit">
            <i class="fa fa-save"></i> Save and Close
        </button>
    </footer>
</form>