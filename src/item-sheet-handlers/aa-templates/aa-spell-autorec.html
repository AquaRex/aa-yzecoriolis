<form class="flexcol" id="AAItemSettings" autocomplete="off" novalidate>
    <nav class="sheet-tabs tabs" data-group="sections">
        <a class="aa-options" data-tab="spell"><i class="fas fa-shield-alt"></i> Spells </a>
    </nav>

    <section class="content">
        <!--Animation Settings-->
        <div class="tab" data-tab="spell" data-group="sections">
            {{#each settings.aaSpellAuto.range as |spell idx|}}
            <div class='aa-spell-autorecog'>
                <div class='flexrow spell-settings' data-idx="{{idx}}">
                    <div class='flexcol'>
                        <div class='form-group'>
                            <div class='form-fields'>
                                <input type='text' name="aaSpellAuto.range.{{idx}}.name" placeholder="Spell Name"
                                    class='auto-name' value="{{lookup (lookup ../settings.aaSpellAuto.range idx) 'name'}}" />
                            </div>
                        </div>
                        <div class="flexrow">
                            <div class="aa-column">
                                <div class='animation-choice'>
                                    <div class='form-group'>
                                        <label for="aaSpellAuto.range.{{idx}}.animation">Animation</label>
                                        <select name="aaSpellAuto.range.{{idx}}.animation">
                                            {{#select (lookup (lookup ../settings.aaSpellAuto.range idx)
                                            'animation')}}
                                            "spell"}}
                                            {{#each ../spellList as |name key|}}
                                            <option value="{{key}}">{{name}}</option>
                                            {{/each}}
                                            {{/select}}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="aa-column">
                                <div class='form-group'>
                                    <label for="aaSpellAuto.range.{{idx}}.variant">Variant</label>
                                    <select name="aaSpellAuto.range.{{idx}}.variant">
                                        {{#select (lookup (lookup ../settings.aaSpellAuto.range idx) 'variant')}}
                                        {{#each (lookup (lookup ../variants 'spell') (lookup (lookup
                                        ../settings.aaSpellAuto.range idx) 'animation')) as |name key|}}
                                        <option value="{{key}}">{{name}}</option>
                                        {{/each}}
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                            <div class="aa-column">
                                <div class='form-group'>
                                    <label for="aaSpellAuto.range.{{idx}}.color">Color</label>
                                    <select name="aaSpellAuto.range.{{idx}}.color">
                                        {{#select (lookup (lookup ../settings.aaSpellAuto.range idx) 'color')}}
                                        {{#each (lookup (lookup (lookup ../colors 'spell') (lookup (lookup
                                        ../settings.aaSpellAuto.range idx) 'animation')) (lookup (lookup
                                        ../settings.aaSpellAuto.range idx) 'variant')) as |name key|}}
                                        <option value="{{key}}">{{name}}</option>
                                        {{/each}}
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class='flexcol remove-override-wrapper'>
                        <button class='remove-autorecog' data-idx="{{idx}}">
                            <i class='far fa-trash-alt'></i>
                        </button>
                    </div>
                </div>
            </div>
            {{/each}}
            <footer class='sheet-footer flexrow add-spell-wrapper'>
                <button class='add-autorecog-spell'>
                    <i class='far fa-plus-square'></i>Add Override
                </button>
            </footer>
        </div>

    </section>
    <footer class="sheet-footer flexrow">
        <button type="submit" name="submit">
            <i class="fa fa-save"></i> Save and Close
        </button>
    </footer>
</form>