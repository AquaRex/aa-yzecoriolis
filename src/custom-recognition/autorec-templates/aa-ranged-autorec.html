<div class='aa-autorecognition'>
    {{#each settings.aaAutorec.range as |range idx|}}
    <div class='aa-range-autorecog aa-search'>
        <div class='flexrow range-settings' data-idx="{{idx}}">
            <div class='flexcol'>
                <div class='form-group'>
                    <div class='form-fields'>
                        <input type='checkbox' class='hideme' name='aaAutorec.range.{{idx}}.hidden' {{checked (lookup
                            (lookup ../settings.aaAutorec.range idx) 'hidden' ) }} style="display:none">
                        <i {{#if ( lookup (lookup ../settings.aaAutorec.range idx) 'hidden' ) }}
                            class="fas fa-plus collapse-button" {{/if}} {{#unless ( lookup (lookup
                            ../settings.aaAutorec.range idx) 'hidden' ) }} class="fas fa-minus collapse-button"
                            {{/unless}}></i>
                        <input type='text' name="aaAutorec.range.{{idx}}.name" placeholder="Range Weapon Name"
                            class='auto-name' value="{{lookup (lookup ../settings.aaAutorec.range idx) 'name'}}" />
                    </div>
                </div>
                <div class='hidden' {{#if ( lookup (lookup ../settings.aaAutorec.range idx) 'hidden' ) }}
                    style="display:none" {{/if}}>
                    <div class="flexrow">
                        <div class="aa-rangemenu" id="aa-autorec-form">
                            <div class='form-group'>
                                <label for="aaAutorec.range.{{idx}}.type">Type</label>
                                <select name="aaAutorec.range.{{idx}}.type">
                                    {{#select (lookup (lookup ../settings.aaAutorec.range idx) 'type')}}
                                    <option value="">Pick a Type</option>
                                    <option value="weapon">Weapon</option>
                                    <option value="spell">Spell</option>
                                    {{/select}}
                                </select>
                            </div>
                        </div>
                        <div class="aa-rangemenu" id="aa-autorec-form">
                            <div class='animation-choice'>
                                <div class='form-group'>
                                    <label for="aaAutorec.range.{{idx}}.animation">Animation</label>
                                    <select name="aaAutorec.range.{{idx}}.animation">
                                        {{#select (lookup (lookup ../settings.aaAutorec.range idx)
                                        'animation')}}
                                        "range"}}
                                        {{#ifEquals (lookup (lookup ../settings.aaAutorec.range idx) 'type')
                                        'weapon'}}
                                        {{#each ../rangeList as |name key|}}
                                        <option value="{{key}}">{{name}}</option>
                                        {{/each}}
                                        {{/ifEquals}}
                                        {{#ifEquals (lookup (lookup ../settings.aaAutorec.range idx) 'type')
                                        'spell'}}
                                        {{#each ../spellList as |name key|}}
                                        <option value="{{key}}">{{name}}</option>
                                        {{/each}}
                                        {{/ifEquals}}
                                        {{/select}}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flexrow">
                        <div class="aa-rangemenu" id="aa-autorec-form">
                            <div class='form-group'>
                                <label for="aaAutorec.range.{{idx}}.variant">Variant</label>
                                <select name="aaAutorec.range.{{idx}}.variant">
                                    {{#select (lookup (lookup ../settings.aaAutorec.range idx) 'variant')}}
                                    {{#each (lookup (lookup ../variants 'range') (lookup (lookup
                                    ../settings.aaAutorec.range idx) 'animation')) as |name key|}}
                                    <option value="{{key}}">{{name}}</option>
                                    {{/each}}
                                    {{/select}}
                                </select>
                            </div>
                        </div>
                        <div class="aa-rangemenu" id="aa-autorec-form">
                            <div class='form-group'>
                                <label for="aaAutorec.range.{{idx}}.color">Color</label>
                                <select name="aaAutorec.range.{{idx}}.color">
                                    {{#select (lookup (lookup ../settings.aaAutorec.range idx) 'color')}}
                                    {{#each (lookup (lookup (lookup ../colors 'range') (lookup (lookup
                                    ../settings.aaAutorec.range idx) 'animation')) (lookup (lookup
                                    ../settings.aaAutorec.range idx) 'variant')) as |name key|}}
                                    <option value="{{key}}">{{name}}</option>
                                    {{/each}}
                                    {{/select}}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class='flexrow'>
                        <div class="aa-rangemenu" id="aa-autorec-form">
                            <div class='form-group'>
                                <label>{{localize "AUTOANIM.loops"}}</label>
                                <input type="Number" name="aaAutorec.range.{{idx}}.loops"
                                    value="{{lookup (lookup ../settings.aaAutorec.range idx) 'loops'}}"
                                    data-dtype="Number">
                            </div>
                        </div>
                        <div class="aa-rangemenu" id="aa-autorec-form">
                            <div class='form-group'>
                                <label>{{localize "AUTOANIM.loops"}} {{localize "AUTOANIM.delayMS"}}</label>
                                <input type="Number" name="aaAutorec.range.{{idx}}.loopDelay"
                                    value="{{lookup (lookup ../settings.aaAutorec.range idx) 'loopDelay'}}"
                                    data-dtype="Number">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class='flexcol remove-override-wrapper'>
                <button class='remove-autorecog' data-idx="{{idx}}">
                    <i class='far fa-trash-alt'></i>
                </button>
            </div>
        </div>
    </div>
    {{/each}}
</div>
<footer class='sheet-footer flexrow add-range-wrapper'>
    <button class='add-autorecog-range'>
        <i class='far fa-plus-square'></i>Add Override
    </button>
</footer>