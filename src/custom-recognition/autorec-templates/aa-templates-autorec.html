<div class='aa-autorecognition'>
    {{#each settings.aaAutorec.templates as |templates idx|}}
    <div class='aa-templates-autorecog aa-search'>
        <div class='flexrow templates-settings' data-idx="{{idx}}">
            <div class='flexcol'>
                <div class='form-group'>
                    <div class='form-fields'>
                        <input type='checkbox' class='hideme' name='aaAutorec.templates.{{idx}}.hidden' {{checked
                            (lookup (lookup ../settings.aaAutorec.templates idx) 'hidden' ) }} style="display:none">
                        <i {{#if ( lookup (lookup ../settings.aaAutorec.templates idx) 'hidden' ) }}
                            class="fas fa-plus collapse-button" {{/if}} {{#unless ( lookup (lookup
                            ../settings.aaAutorec.templates idx) 'hidden' ) }} class="fas fa-minus collapse-button"
                            {{/unless}}></i>
                        <input type='text' name="aaAutorec.templates.{{idx}}.name" placeholder="Item Name"
                            class='auto-name' value="{{lookup (lookup ../settings.aaAutorec.templates idx) 'name'}}" />
                    </div>
                </div>
                <div class='hidden' {{#if ( lookup (lookup ../settings.aaAutorec.templates idx) 'hidden' ) }}
                    style="display:none" {{/if}}>
                    <div class="aa-container">
                        <div class="option01">
                            <div class="aa-rangemenu">
                                <label for="aaAutorec.templates.{{idx}}.type">Type:
                                    <select name="aaAutorec.templates.{{idx}}.type">
                                        {{#select (lookup (lookup ../settings.aaAutorec.templates idx)
                                        'type')}}
                                        <option value="cone">Cone</option>
                                        <option value="rect">Square</option>
                                        <option value="circle">Circle</option>
                                        <option value="ray">Ray</option>
                                        {{/select}}
                                    </select>
                                </label>
                            </div>
                        </div>
                        {{#unless (lookup (lookup ../settings.aaAutorec.templates idx) 'custom')}}
                        <div class="option02">
                            <div class="aa-rangemenu">
                                <div class='animation-choice'>
                                    <label for="aaAutorec.templates.{{idx}}.animation">Animation:
                                        <select name="aaAutorec.templates.{{idx}}.animation">
                                            {{#select (lookup (lookup ../settings.aaAutorec.templates idx)
                                            'animation')}}
                                            {{#ifEquals (lookup (lookup ../settings.aaAutorec.templates idx) 'type')
                                            'circle'}}
                                            {{#each ../templateCircle as |name key|}}
                                            <option value="{{key}}">{{name}}</option>
                                            {{/each}}
                                            {{/ifEquals}}

                                            {{#ifEquals (lookup (lookup ../settings.aaAutorec.templates idx) 'type')
                                            'cone'}}
                                            {{#each ../templateCone as |name key|}}
                                            <option value="{{key}}">{{name}}</option>
                                            {{/each}}
                                            {{/ifEquals}}

                                            {{#ifEquals (lookup (lookup ../settings.aaAutorec.templates idx) 'type')
                                            'rect'}}
                                            {{#each ../templateRect as |name key|}}
                                            <option value="{{key}}">{{name}}</option>
                                            {{/each}}
                                            {{/ifEquals}}

                                            {{#ifEquals (lookup (lookup ../settings.aaAutorec.templates idx) 'type')
                                            'ray'}}
                                            {{#each ../templateRay as |name key|}}
                                            <option value="{{key}}">{{name}}</option>
                                            {{/each}}
                                            {{/ifEquals}}
                                            {{/select}}
                                        </select>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="option03">
                            <div class="aa-rangemenu">
                                <label for="aaAutorec.templates.{{idx}}.variant">Variant:
                                    <select name="aaAutorec.templates.{{idx}}.variant" sytle="width:5em">
                                        {{#select (lookup (lookup ../settings.aaAutorec.templates idx) 'variant')}}
                                        {{#each (lookup (lookup ../variants 'static') (lookup (lookup
                                        ../settings.aaAutorec.templates idx) 'animation')) as |name key|}}
                                        <option value="{{key}}">{{name}}</option>
                                        {{/each}}
                                        {{/select}}
                                    </select>
                                </label>
                            </div>
                        </div>
                        <div class="option04">
                            <div class="aa-rangemenu">
                                <label for="aaAutorec.templates.{{idx}}.color">Color:
                                    <select name="aaAutorec.templates.{{idx}}.color">
                                        {{#select (lookup (lookup ../settings.aaAutorec.templates idx) 'color')}}
                                        {{#each (lookup (lookup (lookup ../colors 'static') (lookup (lookup
                                        ../settings.aaAutorec.templates idx) 'animation')) (lookup (lookup
                                        ../settings.aaAutorec.templates idx) 'variant')) as |name key|}}
                                        <option value="{{key}}">{{name}}</option>
                                        {{/each}}
                                        {{/select}}
                                    </select>
                                </label>
                            </div>
                        </div>
                        {{/unless}}
                        <div class="option05">
                            <div class="autorec-menu-options">
                                <label>Repeat:
                                    <input type="Number" name="aaAutorec.templates.{{idx}}.repeat"
                                        value="{{lookup (lookup ../settings.aaAutorec.templates idx) 'repeat'}}"
                                        data-dtype="Number">
                                </label>
                            </div>
                        </div>
                        <div class="option06">
                            <div class="autorec-menu-options">
                                <label>Delay:
                                    <input type="Number" name="aaAutorec.templates.{{idx}}.delay"
                                        value="{{lookup (lookup ../settings.aaAutorec.templates idx) 'delay'}}"
                                        data-dtype="Number">
                                </label>
                            </div>
                        </div>
                        <div class="option08">
                            <div class="autorec-menu-options">
                                <div class='form-group'>
                                    <label>Below: </label>
                                    <input type='checkbox' name='aaAutorec.templates.{{idx}}.below' {{checked (lookup
                                        (lookup ../settings.aaAutorec.templates idx) 'below' ) }}>
                                </div>
                            </div>
                        </div>
                        <div class="option09">
                            <div class="autorec-menu-options">
                                <div class='form-group'>
                                    <label>Custom: </label>
                                    <input type='checkbox' name='aaAutorec.templates.{{idx}}.custom' {{checked (lookup
                                        (lookup ../settings.aaAutorec.templates idx) 'custom' ) }}>
                                </div>
                            </div>
                        </div>
                        {{#if (lookup (lookup ../settings.aaAutorec.templates idx) 'custom')}}
                        <div class="pickerspan">
                            <div class="form-group">
                                <input type="text" class="files" name="aaAutorec.templates.{{idx}}.customPath"
                                    value="{{lookup (lookup ../settings.aaAutorec.templates idx) 'customPath'}}">
                                <button type="button" class="file-picker" data-type="image/video"
                                    data-target="aaAutorec.templates.{{idx}}.customPath" tabindex="-1"
                                    title="Browse Files">
                                    <i class="fas fa-music"></i>
                                </button>
                            </div>
                        </div>
                        {{/if}}
                        <div class="option13">
                            <div class="autorec-menu-options">
                                <label>Opacity:
                                    <input type="Number" name="aaAutorec.templates.{{idx}}.opacity"
                                        value="{{lookup (lookup ../settings.aaAutorec.templates idx) 'opacity'}}"
                                        data-dtype="Number">
                                </label>
                            </div>
                        </div>
                        <div class="option14">
                            <div class="autorec-menu-options">
                                <div class='form-group'>
                                    <label>Remove Template: </label>
                                    <input type='checkbox' name='aaAutorec.templates.{{idx}}.removeTemplate' {{checked
                                        (lookup (lookup ../settings.aaAutorec.templates idx) 'removeTemplate' ) }}>
                                </div>
                            </div>
                        </div>
                        <div class="option15">
                            <div class="autorec-menu-options">
                                <div class='form-group'>
                                    <label>Place as Tile: </label>
                                    <input type='checkbox' name='aaAutorec.templates.{{idx}}.persist' {{checked (lookup
                                        (lookup ../settings.aaAutorec.templates idx) 'persist' ) }}>
                                </div>
                            </div>
                        </div>
                        {{#if (lookup (lookup ../settings.aaAutorec.templates idx) 'persist')}}
                        <div class="option16">
                            <div class="autorec-menu-options">
                                <div class='form-group'>
                                    <label>Overhead: </label>
                                    <input type='checkbox' name='aaAutorec.templates.{{idx}}.overhead' {{checked (lookup
                                        (lookup ../settings.aaAutorec.templates idx) 'overhead' ) }}>
                                </div>
                            </div>
                        </div>
                        {{/if}}
                    </div>
                    {{#if (lookup (lookup ../settings.aaAutorec.templates idx) 'overhead')}}
                    <div class="form-group">
                        <label class="socketlibWarn">SOCKETLIB {{localize "AUTOANIM.socketLibAA"}}</label>
                    </div>    
                    <div class='flexrow'>
                        <div class="autorec-menu-options">
                            <div class="form-group">
                                <label>{{localize "AUTOANIM.occlusionMode"}}</label>
                                <select name="aaAutorec.templates.{{idx}}.occlusionMode">
                                    {{#select (lookup (lookup ../settings.aaAutorec.templates idx)
                                    'occlusionMode')}}
                                    <option value="3">{{localize "AUTOANIM.occlusion03"}}</option>
                                    <option value="1">{{localize "AUTOANIM.occlusion01"}}</option>
                                    <option value="2">{{localize "AUTOANIM.occlusion02"}}</option>
                                    <option value="0">{{localize "AUTOANIM.occlusion00"}}</option>
                                    {{/select}}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="autorec-menu-options">
                        <div class="form-group">
                            <label>{{localize "AUTOANIM.occlusionAlpha"}}</label>
                            <div class="form-fields">
                                <input type="range" name="aaAutorec.templates.{{idx}}.occlusionAlpha"
                                    value="{{lookup (lookup ../settings.aaAutorec.templates idx) 'occlusionAlpha'}}"
                                    min="0" max="1" step="0.05">
                                <span class="range-value">{{occlusionAlpha}}</span>
                            </div>
                        </div>
                    </div>
                    {{/if}}
                </div>
            </div>
            <div class='flexcol remove-override-wrapper'>
                <button class='remove-autorecog' data-idx="{{idx}}">
                    <i class='far fa-trash-alt'></i>
                </button>
            </div>
        </div>
    </div>
    {{/each}}
</div>
<footer class='sheet-footer flexrow add-templates-wrapper'>
    <button class='add-autorecog-templates'>
        <i class='far fa-plus-square'></i>Add Override
    </button>
</footer>